<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Pace Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .calculator-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .input-group {
            display: flex;
            flex-direction: column;
        }
        .input-group label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .input-group input {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        .input-help {
            font-size: 11px;
            color: #7f8c8d;
            margin-top: 3px;
        }
        .results-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
        }
        .results-section.active {
            display: block;
        }
        .results-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .results-header h2 {
            margin: 0 0 5px 0;
            font-size: 24px;
        }
        .vdot-score {
            font-size: 14px;
            opacity: 0.9;
        }
        .pace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .pace-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }
        .pace-card h3 {
            margin: 0 0 5px 0;
            color: #2c3e50;
            font-size: 16px;
        }
        .pace-card .pace-description {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        .pace-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        .pace-details {
            font-size: 11px;
            color: #555;
            margin-top: 5px;
        }
        .legend {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .legend h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .legend p {
            margin: 8px 0;
            font-size: 13px;
            color: #555;
        }
        .workout-examples {
            background: #e8f4f8;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 12px;
        }
        .workout-examples strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Home</a>
    <h1>Training Pace Calculator</h1>
    <div class="subtitle">Calculate your training paces based on current or target race times</div>

    <div class="legend">
        <h3>About Training Paces</h3>
        <p><strong>Based on Jack Daniels' VDOT System:</strong> This calculator uses the proven VDOT methodology to determine optimal training paces for different workout types.</p>
        <p><strong>How to use:</strong> Enter your current race time (or goal time) for any distance. The calculator will show you the appropriate paces for all your training workouts.</p>
        <p><strong>Training Zones:</strong> Easy (recovery/long runs), Marathon Pace, Threshold/Tempo (comfortably hard), Interval (VO2max), and Repetition (speed work).</p>
    </div>

    <div class="calculator-section">
        <h2 style="margin-top: 0; color: #2c3e50;">Enter Your Race Time</h2>
        <div class="input-grid">
            <div class="input-group">
                <label for="time400m">400m Time</label>
                <input type="text" id="time400m" placeholder="e.g., 52.00">
                <span class="input-help">Format: seconds.hundredths</span>
            </div>
            <div class="input-group">
                <label for="time800m">800m Time</label>
                <input type="text" id="time800m" placeholder="e.g., 2:05">
                <span class="input-help">Format: M:SS</span>
            </div>
            <div class="input-group">
                <label for="timeMile">Mile Time</label>
                <input type="text" id="timeMile" placeholder="e.g., 5:30">
                <span class="input-help">Format: M:SS</span>
            </div>
            <div class="input-group">
                <label for="time5k">5K Time</label>
                <input type="text" id="time5k" placeholder="e.g., 20:00">
                <span class="input-help">Format: MM:SS</span>
            </div>
            <div class="input-group">
                <label for="time10k">10K Time</label>
                <input type="text" id="time10k" placeholder="e.g., 42:00">
                <span class="input-help">Format: MM:SS</span>
            </div>
            <div class="input-group">
                <label for="timeHalf">Half Marathon</label>
                <input type="text" id="timeHalf" placeholder="e.g., 1:35:00">
                <span class="input-help">Format: H:MM:SS</span>
            </div>
            <div class="input-group">
                <label for="timeMarathon">Marathon Time</label>
                <input type="text" id="timeMarathon" placeholder="e.g., 3:30:00">
                <span class="input-help">Format: H:MM:SS</span>
            </div>
        </div>
    </div>

    <!-- Results sections for each distance -->
    <div id="results400m" class="results-section"></div>
    <div id="results800m" class="results-section"></div>
    <div id="resultsMile" class="results-section"></div>
    <div id="results5k" class="results-section"></div>
    <div id="results10k" class="results-section"></div>
    <div id="resultsHalf" class="results-section"></div>
    <div id="resultsMarathon" class="results-section"></div>

    <script>
        // VDOT calculation and training pace logic

        // Simplified VDOT table mapping race times to VDOT scores
        const vdotData = [
            // Format: {vdot, m400, m800, mile, m5k, m10k, half, marathon} - all in seconds
            {vdot: 85, m400: 45, m800: 100, mile: 220, m5k: 870, m10k: 1815, half: 3960, marathon: 8460},
            {vdot: 80, m400: 49, m800: 108, mile: 238, m5k: 960, m10k: 2010, half: 4380, marathon: 9360},
            {vdot: 75, m400: 53, m800: 116, mile: 256, m5k: 1056, m10k: 2220, half: 4845, marathon: 10380},
            {vdot: 70, m400: 57, m800: 124, mile: 274, m5k: 1158, m10k: 2445, half: 5355, marathon: 11475},
            {vdot: 65, m400: 61, m800: 132, mile: 292, m5k: 1272, m10k: 2688, half: 5910, marathon: 12690},
            {vdot: 60, m400: 66, m800: 142, mile: 314, m5k: 1398, m10k: 2958, half: 6525, marathon: 14025},
            {vdot: 55, m400: 71, m800: 153, mile: 339, m5k: 1542, m10k: 3270, half: 7230, marathon: 15570},
            {vdot: 50, m400: 77, m800: 165, mile: 366, m5k: 1710, m10k: 3630, half: 8040, marathon: 17340},
            {vdot: 45, m400: 84, m800: 179, mile: 397, m5k: 1908, m10k: 4056, half: 9012, marathon: 19452},
            {vdot: 40, m400: 93, m800: 196, mile: 435, m5k: 2148, m10k: 4572, half: 10200, marathon: 22020},
            {vdot: 35, m400: 103, m800: 216, mile: 480, m5k: 2436, m10k: 5196, half: 11610, marathon: 25140},
            {vdot: 30, m400: 115, m800: 240, mile: 534, m5k: 2784, m10k: 5952, half: 13320, marathon: 28920}
        ];

        // Time parsing function
        function parseTime(timeStr, distance) {
            if (!timeStr || timeStr.trim() === '') return null;

            timeStr = timeStr.trim();

            // 400m: seconds.hundredths (e.g., "52.00")
            if (distance === '400m') {
                return parseFloat(timeStr);
            }

            // Other formats: H:MM:SS, MM:SS, or M:SS
            const parts = timeStr.split(':').map(Number);

            if (parts.length === 3) {
                return parts[0] * 3600 + parts[1] * 60 + parts[2];
            } else if (parts.length === 2) {
                return parts[0] * 60 + parts[1];
            }

            return null;
        }

        // Find VDOT from race time
        function findVDOT(timeSeconds, distanceKey) {
            let closestVDOT = vdotData[0];
            let minDiff = Math.abs(vdotData[0][distanceKey] - timeSeconds);

            for (let i = 1; i < vdotData.length; i++) {
                const diff = Math.abs(vdotData[i][distanceKey] - timeSeconds);
                if (diff < minDiff) {
                    minDiff = diff;
                    closestVDOT = vdotData[i];
                }
            }

            // Linear interpolation for more accuracy
            const vdot = closestVDOT.vdot;
            return vdot;
        }

        // Get training paces for a given VDOT
        function getTrainingPaces(vdot) {
            // Find the VDOT entry (or interpolate)
            let vdotEntry = vdotData.find(entry => entry.vdot === vdot);

            if (!vdotEntry) {
                // Find bracketing entries for interpolation
                let lower = vdotData[vdotData.length - 1];
                let upper = vdotData[0];

                for (let i = 0; i < vdotData.length - 1; i++) {
                    if (vdot >= vdotData[i + 1].vdot && vdot <= vdotData[i].vdot) {
                        upper = vdotData[i];
                        lower = vdotData[i + 1];
                        break;
                    }
                }

                // Simple interpolation
                const ratio = (vdot - lower.vdot) / (upper.vdot - lower.vdot);
                vdotEntry = {
                    vdot: vdot,
                    m400: lower.m400 + ratio * (upper.m400 - lower.m400),
                    m800: lower.m800 + ratio * (upper.m800 - lower.m800),
                    mile: lower.mile + ratio * (upper.mile - lower.mile),
                    m5k: lower.m5k + ratio * (upper.m5k - lower.m5k),
                    m10k: lower.m10k + ratio * (upper.m10k - lower.m10k),
                    half: lower.half + ratio * (upper.half - lower.half),
                    marathon: lower.marathon + ratio * (upper.marathon - lower.marathon)
                };
            }

            // Calculate training paces based on VDOT
            // Easy: ~120-130% of 5K pace per mile
            const easyPacePerMile = (vdotEntry.m5k / 3.10686) * 1.25;

            // Marathon pace
            const marathonPacePerMile = vdotEntry.marathon / 26.2;

            // Threshold/Tempo: ~88% of VDOT (between 10K and half marathon pace)
            const thresholdPacePerMile = ((vdotEntry.m10k / 6.21371) + (vdotEntry.half / 13.1)) / 2;

            // Interval: ~98-100% of VDOT (around 5K pace or slightly faster)
            const intervalPacePerMile = vdotEntry.m5k / 3.10686;

            // Repetition: For distance runners, use mile pace per 400m (NOT max 400m sprint time)
            // R pace ≈ current mile race pace per 400m, or interval pace - 6-8 seconds per 400m
            const repetitionPace400m = vdotEntry.mile / 4.02336; // Mile time divided by 4.02336 (400m per mile)

            return {
                easy: easyPacePerMile,
                marathon: marathonPacePerMile,
                threshold: thresholdPacePerMile,
                interval: intervalPacePerMile,
                repetition400m: repetitionPace400m,
                race5k: vdotEntry.m5k,
                raceMile: vdotEntry.mile,
                race800m: vdotEntry.m800,
                race400m: vdotEntry.m400
            };
        }

        function secondsToTime(totalSeconds) {
            totalSeconds = Math.round(totalSeconds);
            const hours = Math.floor(totalSeconds / 3600);
            const mins = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;

            if (hours > 0) {
                return `${hours}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function secondsToSprintTime(totalSeconds) {
            return totalSeconds.toFixed(2);
        }

        function displayTrainingPaces(distance, distanceKey, vdot, paces) {
            const resultsDiv = document.getElementById(`results${distance}`);

            let distanceName = distance;
            if (distance === 'Mile') distanceName = 'Mile';
            else if (distance === 'Half') distanceName = 'Half Marathon';
            else if (distance === 'Marathon') distanceName = 'Marathon';

            let workoutCards = '';

            // Different workout cards based on distance
            if (distance === '400m' || distance === '800m' || distance === 'Mile') {
                // Sprint/middle distance workouts
                workoutCards = `
                    <div class="pace-card">
                        <h3>Easy Recovery</h3>
                        <p class="pace-description">60-70% effort • Recovery runs, warm-up, cool-down</p>
                        <div class="pace-value">${secondsToTime(paces.easy)}/mile</div>
                        <div class="workout-examples"><strong>Use for:</strong> Easy runs, recovery days, warm-up/cool-down jogs</div>
                    </div>

                    <div class="pace-card">
                        <h3>Tempo/Threshold</h3>
                        <p class="pace-description">Comfortably hard • Improves lactate threshold</p>
                        <div class="pace-value">${secondsToTime(paces.threshold)}/mile</div>
                        <div class="workout-examples"><strong>Workout:</strong> 20-30 min continuous tempo or 3-4 × 1 mile @ tempo with 1 min rest</div>
                    </div>

                    <div class="pace-card">
                        <h3>Race Pace Intervals</h3>
                        <p class="pace-description">Target race pace practice</p>
                        <div class="pace-value">${distance === '400m' ? secondsToSprintTime(paces.race400m) : secondsToTime(distance === '800m' ? paces.race800m : paces.raceMile)}</div>
                        <div class="workout-examples"><strong>Workout:</strong> ${distance === '400m' ? '6-8 × 400m @ race pace, 3-4 min recovery' : distance === '800m' ? '4-6 × 400m @ 800m pace, 90 sec rest' : '6-8 × 400m @ mile pace, 90 sec rest'}</div>
                    </div>

                    <div class="pace-card">
                        <h3>Speed Repetitions</h3>
                        <p class="pace-description">Fast, short reps • Improves speed & economy</p>
                        <div class="pace-value">${secondsToSprintTime(paces.repetition400m)}/400m</div>
                        <div class="workout-examples"><strong>Workout:</strong> 8-12 × 200m or 6-8 × 300m @ faster than race pace, full recovery</div>
                    </div>
                `;
            } else {
                // Distance running workouts (5K and longer)
                workoutCards = `
                    <div class="pace-card">
                        <h3>Easy Runs</h3>
                        <p class="pace-description">60-70% effort • Recovery, long runs, base building</p>
                        <div class="pace-value">${secondsToTime(paces.easy)}/mile</div>
                        <div class="pace-details">Per km: ${secondsToTime(paces.easy / 1.60934)}</div>
                        <div class="workout-examples"><strong>Use for:</strong> Recovery runs, easy days, long runs (60-150 min)</div>
                    </div>

                    ${distance === 'Marathon' || distance === 'Half' ? `
                    <div class="pace-card">
                        <h3>Marathon Pace</h3>
                        <p class="pace-description">Race pace for marathon training</p>
                        <div class="pace-value">${secondsToTime(paces.marathon)}/mile</div>
                        <div class="pace-details">Per km: ${secondsToTime(paces.marathon / 1.60934)}</div>
                        <div class="workout-examples"><strong>Workout:</strong> 2-4 × 2 miles @ MP or long runs with MP segments</div>
                    </div>` : ''}

                    <div class="pace-card">
                        <h3>Tempo/Threshold</h3>
                        <p class="pace-description">Comfortably hard • Improves lactate threshold</p>
                        <div class="pace-value">${secondsToTime(paces.threshold)}/mile</div>
                        <div class="pace-details">Per km: ${secondsToTime(paces.threshold / 1.60934)}</div>
                        <div class="workout-examples"><strong>Workout:</strong> 20-40 min continuous tempo or 2-3 × 2 miles @ tempo, 2 min rest</div>
                    </div>

                    <div class="pace-card">
                        <h3>Interval/VO2 Max</h3>
                        <p class="pace-description">Hard effort • Improves VO2 max, 3-5 min intervals</p>
                        <div class="pace-value">${secondsToTime(paces.interval)}/mile</div>
                        <div class="pace-details">Per km: ${secondsToTime(paces.interval / 1.60934)} • Per 400m: ${secondsToTime(paces.interval / 4.02336)}</div>
                        <div class="workout-examples"><strong>Workout:</strong> 5-6 × 1000m or 8-10 × 400m, equal rest/recovery</div>
                    </div>

                    <div class="pace-card">
                        <h3>Repetition</h3>
                        <p class="pace-description">Fast reps • Improves speed & running economy</p>
                        <div class="pace-value">${secondsToSprintTime(paces.repetition400m)}/400m</div>
                        <div class="pace-details">Faster than interval pace</div>
                        <div class="workout-examples"><strong>Workout:</strong> 10-12 × 400m or 6-8 × 600m, full recovery (2-3 min)</div>
                    </div>
                `;
            }

            resultsDiv.innerHTML = `
                <div class="results-header">
                    <h2>${distanceName} Training Paces</h2>
                    <div class="vdot-score">VDOT Score: ${Math.round(vdot)} • Fitness Level: ${getFitnessLevel(vdot)}</div>
                </div>
                <div class="pace-grid">
                    ${workoutCards}
                </div>
            `;

            resultsDiv.classList.add('active');
        }

        function getFitnessLevel(vdot) {
            if (vdot >= 75) return 'Elite';
            if (vdot >= 65) return 'Advanced';
            if (vdot >= 55) return 'Intermediate';
            if (vdot >= 45) return 'Recreational';
            return 'Beginner';
        }

        // Event listeners for all inputs
        document.getElementById('time400m').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, '400m');
            if (time) {
                const vdot = findVDOT(time, 'm400');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('400m', 'm400', vdot, paces);
            }
        });

        document.getElementById('time800m').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, '800m');
            if (time) {
                const vdot = findVDOT(time, 'm800');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('800m', 'm800', vdot, paces);
            }
        });

        document.getElementById('timeMile').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, 'mile');
            if (time) {
                const vdot = findVDOT(time, 'mile');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('Mile', 'mile', vdot, paces);
            }
        });

        document.getElementById('time5k').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, '5k');
            if (time) {
                const vdot = findVDOT(time, 'm5k');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('5k', 'm5k', vdot, paces);
            }
        });

        document.getElementById('time10k').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, '10k');
            if (time) {
                const vdot = findVDOT(time, 'm10k');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('10k', 'm10k', vdot, paces);
            }
        });

        document.getElementById('timeHalf').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, 'half');
            if (time) {
                const vdot = findVDOT(time, 'half');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('Half', 'half', vdot, paces);
            }
        });

        document.getElementById('timeMarathon').addEventListener('input', function(e) {
            const time = parseTime(e.target.value, 'marathon');
            if (time) {
                const vdot = findVDOT(time, 'marathon');
                const paces = getTrainingPaces(vdot);
                displayTrainingPaces('Marathon', 'marathon', vdot, paces);
            }
        });
    </script>
</body>
</html>
